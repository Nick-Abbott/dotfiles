############################
# Variables / app commands #
############################

$mod      = SUPER
$terminal = ghostty
$browser  = flatpak run app.zen_browser.zen
$editor   = code
$editor2  = idea
$aiEditor = windsurf
$chat1    = flatpak run com.discordapp.Discord
$chat2    = slack

###########
# Monitor #
###########
monitor = DP-3, 5120x2160@120, 0x0, 1

########
# Env  #
########

env = XDG_CURRENT_DESKTOP,Hyprland
env = GDK_BACKEND,wayland,x11
env = QT_QPA_PLATFORM,wayland;xcb
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = XCURSOR_SIZE,42
env = XCURSOR_THEME,capitaine-cursors
env = HYPRCURSOR_THEME,capitaine-cursors
env = HYPRCURSOR_SIZE,42
env = PATH,$HOME/.local/bin:/usr/local/bin:/usr/bin

#########
# Input #
#########

input {
  kb_layout = us
  follow_mouse = 1
  touchpad {
    natural_scroll = yes
  }
}

###########
# General #
###########

general {
  gaps_in = 5
  gaps_out = 10
  border_size = 2
  col.active_border = rgba(5e81acff) rgba(81a1c1ff) 45deg
  col.inactive_border = rgba(595959aa)
  layout = dwindle

  resize_on_border = false
  allow_tearing = false
}

decoration {
  rounding = 10
  active_opacity = 1.0
  inactive_opacity = 0.9
  blur {
    enabled = yes
    size = 12
    passes = 1
  }
  shadow {
    enabled = true
    range = 4
    render_power = 3
    color = rgba(1a1a1aee)
  }
}

animations {
  enabled = yes
  bezier = easeOutQuint,0.23,1,0.32,1
  bezier = easeInOutCubic,0.65,0.05,0.36,1
  bezier = linear,0,0,1,1
  bezier = almostLinear,0.5,0.5,0.75,1.0
  bezier = quick,0.15,0,0.1,1

  animation = global, 1, 10, default
  animation = border, 1, 5.39, easeOutQuint
  animation = windows, 1, 4.79, easeOutQuint
  animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
  animation = windowsOut, 1, 1.49, linear, popin 87%
  animation = fadeIn, 1, 1, almostLinear
  animation = fadeOut, 1, 1, almostLinear
  animation = fade, 1, 1.5, quick
  animation = layers, 1, 3.81, easeOutQuint
  animation = layersIn, 1, 4, easeOutQuint, fade
  animation = layersOut, 1, 1.5, linear, fade
  animation = fadeLayersIn, 1, 1.79, almostLinear
  animation = fadeLayersOut, 1, 1.39, almostLinear
  animation = workspaces, 1, 1, almostLinear, fade
  animation = workspacesIn, 1, 1, almostLinear, fade
  animation = workspacesOut, 1, 1, almostLinear, fade
}

################
# Workspaces   #
################

# Persistent, named workspaces on your main monitor
workspace = 1, name:normal, layout:dwindle
workspace = 2, name:dev, layout:master
workspace = 3, name:chat, layout:master
workspace = 4, name:game, layout:dwindle


dwindle {
  pseudotile = true
  preserve_split = true
}

##################
# Exec on startup #
##################

exec-once = waybar
exec-once = hyprpaper
exec-once = nm-applet
exec-once = blueman-applet

#############
# Keybinds  #
#############

# Launchers
bind = $mod, RETURN, exec, $terminal
bind = $mod, B, exec, $browser
bind = $mod, C, exec, $editor
bind = $mod, I, exec, $editor2
bind = $mod, W, exec, $aiEditor
bind = $mod, D, exec, rofi -show drun
bind = $mod, X, exec, $chat1
bind = $mod|SHIFT, X, exec, $chat2
bind = $mod, S, exec, steam
bind = $mod, M, exec, flatpak run com.spotify.Client

# Workspaces (Super+number)
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5

# Move focused window to workspace
bind = $mod|SHIFT, 1, movetoworkspace, 1
bind = $mod|SHIFT, 2, movetoworkspace, 2
bind = $mod|SHIFT, 3, movetoworkspace, 3
bind = $mod|SHIFT, 4, movetoworkspace, 4
bind = $mod|SHIFT, 5, movetoworkspace, 5

# Focus movement (like a tiler, not GNOME)
bind = $mod, LEFT,  movefocus, l
bind = $mod, RIGHT, movefocus, r
bind = $mod, UP,    movefocus, u
bind = $mod, DOWN,  movefocus, d

# Move windows around
bind = $mod|SHIFT, LEFT,  movewindow, l
bind = $mod|SHIFT, RIGHT, movewindow, r
bind = $mod|SHIFT, UP,    movewindow, u
bind = $mod|SHIFT, DOWN,  movewindow, d
bind = $mod|SHIFT, S,     layoutmsg,  togglesplit

# Layout / fullscreen / floating
bind = $mod, L, layoutmsg, orientationcycle
bind = $mod, Y, exec, hyprctl keyword general:layout "$(hyprctl getoption general:layout | grep -q 'dwindle' && echo 'master' || echo 'dwindle')" #! @description: "Toggle between dwindle and master layout"; @windows;
bind = $mod, F, fullscreen, 1              # toggle fullscreen for window
bind = $mod, SPACE, togglefloating         # toggle floating for current window

# Media
bind = $mod, P, exec, playerctl play-pause

# Kill window
bind = $mod, Q, killactive

# Misc
bind = $mod, O, exec, grim - | wl-copy                     # screenshot monitor to clipboard
bind = $mod|SHIFT, O, exec, grim -g "$(slurp)" - | wl-copy      # screenshot to clipboard
bind = $mod|ALT, O, exec, grim ~/Pictures/screenshot-$(date +%F-%T).png
bind = $mod|SHIFT|ALT, O, exec, grim -g "$(slurp)" ~/Pictures/screenshot-$(date +%F-%T).png

#######################
# Window rules / roles #
#######################

# Editors: VS Code + IntelliJ
windowrulev2 = workspace 2, class:^(code|Code|idea|jetbrains-idea-cte|jetbrains-rustrover)$

# Chat: Discord + Slack
windowrulev2 = workspace 3, class:^(discord|Slack|slack)$
windowrulev2 = workspace 3, class:^(Spotify)

# Steam / games
windowrulev2 = workspace 4, class:^(steam)$

##################
# Mouse settings #
##################

bindm = $mod, mouse:272, movewindow      # Super + left drag to move
bindm = $mod, mouse:273, resizewindow    # Super + right drag to resize
